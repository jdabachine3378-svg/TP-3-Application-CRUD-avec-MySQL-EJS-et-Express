<!-- Titre de la page -->
<h1>Liste des produits</h1>

<!-- Bouton pour ajouter un nouveau produit -->
<a href="/products/create" class="btn btn-primary mb-3">Ajouter un produit</a>

<!-- Vérification si la liste des produits est vide -->
<% if (products.length == 0) { %>
    <!-- Message affiché si aucun produit n'existe -->
    <div class="alert alert-info">
        <p>Aucun produit trouvé. <a href="/products/create">Ajoutez-en un maintenant</a>.</p>
    </div>
<% } else { %>
    <!-- Tableau responsive Bootstrap pour afficher les produits -->
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nom</th>
                    <th>Prix</th>
                    <th>Description</th>
                    <th>Date de création</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Boucle EJS pour afficher chaque produit -->
                <% products.forEach(product => { %>
                    <tr>
                        <!-- Affichage de l'ID du produit -->
                        <td><%= product.id %></td>
                        <!-- Affichage du nom du produit -->
                        <td><%= product.name %></td>
                        <!-- Formatage du prix avec 2 décimales -->
                        <td><%= product.price.toFixed(2) %> €</td>
                        <!-- Affichage de la description (tronquée si trop longue) -->
                        <td><%= product.description ? product.description.substring(0, 50) + (product.description.length > 50 ? '...' : '') : 'Aucune description' %></td>
                        <!-- Formatage de la date de création -->
                        <td><%= new Date(product.created_at).toLocaleDateString('fr-FR') %></td>
                        <td>
                            <!-- Bouton pour voir les détails du produit -->
                            <a href="/products/<%= product.id %>" class="btn btn-sm btn-info">Voir</a>
                            <!-- Bouton pour modifier le produit -->
                            <a href="/products/edit/<%= product.id %>" class="btn btn-sm btn-warning">Modifier</a>
                            <!-- Formulaire de suppression avec confirmation JavaScript -->
                            <form action="/products/<%= product.id %>/delete" method="POST" class="d-inline" 
                                  onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce produit ?');">
                                <button type="submit" class="btn btn-sm btn-danger">Supprimer</button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
<% } %>

